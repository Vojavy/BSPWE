# Основные настройки
ServerName                      "FTP Server"
ServerType                      standalone
DefaultServer                   on
Port                           21
UseIPv6                        off
Umask                          022

# Настройки пользователей
RequireValidShell              off
AuthOrder                      mod_auth_unix.c
AuthPAM                        off
Group                          ftp

# Настройки безопасности
MaxInstances                   30
MaxClientsPerHost             10
MaxLoginAttempts              3

# Настройки пассивного режима
PassivePorts                   30000 30009
# Внешний IP для пассивного режима (IP хоста Docker)
# В контейнере используем маску, чтобы брать IP из внешней сети
MasqueradeAddress              127.0.0.1 

# Настройки активного режима
AllowForeignAddress           on
AllowStoreRestart             on
IdentLookups                  off
UseReverseDNS                 off

# Настройки директорий
DefaultRoot                    ~
AllowOverwrite                on
CreateHome                    on 755

# Дополнительные настройки
DelayEngine                   off
WtmpLog                       off

# Отключаем проверку на пользователя
RootLogin                     off

# Настройки SSL/TLS
<IfModule mod_tls.c>
    TLSEngine                     on
    TLSLog                        /var/log/proftpd/tls.log
    TLSProtocol                   TLSv1.2
    TLSRSACertificateFile        /etc/ssl/private/proftpd.pem
    TLSRSACertificateKeyFile     /etc/ssl/private/proftpd.pem
    TLSOptions                   NoSessionReuseRequired
    TLSVerifyClient              off
    TLSRequired                   off
    TLSRenegotiate               none
</IfModule>

# Логирование
TransferLog                   /var/log/proftpd/xferlog
SystemLog                     /var/log/proftpd/proftpd.log

# Конец конфигурации 